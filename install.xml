<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<!-- $Id$ -->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.5.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>

		<title lang="en">board3 Portal 2.0.0 - Beta 1</title>
		<title lang="de">board3 Portal 2.0.0 - Beta 1</title>

		<description lang="en">Adds a portal with several blocks to your forum.
You can change the settings, move the blocks, add new blocks and more in the ACP.

Included language files:
» English (en)
» German (de)

More languages can be found in our International forum: http://www.board3.de/viewforum.php?f=13</description>
		<description lang="de">Fügt ein Portal mit diversen Boxen deinem Forum hinzu.
Im Admin-Bereich kann man unter Anderem die Einstellungen ändern, die Blöcke verschieben, neue Blöcke hinzufügen und vieles mehr.

Enthaltenen Sprachdateien:
» Englisch (en)
» Deutsch (de)

Weitere Sprachen kannst in unserem Internationalen Forum finden: http://www.board3.de/viewforum.php?f=13
</description>

		<author-notes lang="en">I hope you get everything working. Further developement, new boxes for the portal or questions are welcome at www.board3.de
		</author-notes>
		<author-notes lang="de">Ich hoffe ihr habt Spaß am Portal. Neuen Code, bzw neue Boxen und Fragen könnt ihr auf www.board3.de posten.
		</author-notes>
	
		<author-group>
			<author>
				<realname>Ice</realname>
				<username>avaren</username>
				<homepage>http://www.board3.de</homepage>
				<contributions-group>
					<contributions status="past" position="Developer"></contributions>
				</contributions-group>
			</author>
			<author>
				<realname>Kevin</realname>
				<username>saint_hh</username>
				<homepage>http://www.board3.de</homepage>
				<contributions-group>
					<contributions status="current" position="Developer"></contributions>
				</contributions-group>
			</author>
			<author>
				<realname>Christian</realname>
				<username>Christian_N</username>
				<homepage>http://www.phpbb-projekt.de</homepage>
				<contributions-group>
					<contributions status="past" position="Developer"></contributions>
				</contributions-group>
			</author>
			<author>
				<realname>Marc Alexander</realname>
				<username>marc1706</username>
				<email>admin@m-a-styles.de</email>
				<homepage>http://www.m-a-styles.de</homepage>
				<contributions-group>
					<contributions status="current" position="Main-Developer"></contributions>
				</contributions-group>
			</author>
			<author>
				<realname>Joas Schilling</realname>
				<email>nickvergessen@gmx.de</email>
				<username>nickvergessen</username>
				<homepage>http://mods.flying-bits.org/</homepage>
				<contributions-group>
					<contributions status="current" position="Developer"></contributions>
				</contributions-group>
			</author>
			<author>
				<realname>Walter</realname>
				<email>w.bobeth@digitalfotografie-foren.de</email>
				<username>Redbull254</username>
				<homepage>http://www.digitalfotografie-foren.de</homepage>
				<contributions-group>
					<contributions status="past" position="Developer"></contributions>
				</contributions-group>
			 </author>
		</author-group>

		<mod-version>2.0.0b1</mod-version>

		<installation>
			<level>easy</level>
			<time>600</time>
			<target-version>3.0.8</target-version>
		</installation>

		<link-group>
			<link type="dependency" lang="en" href="http://www.phpbb.com/community/viewtopic.php?f=69&amp;t=691155">Board3 Portal supports MOD Version Check. To use this feature, this mod has to be installed.</link>
			<link type="dependency" lang="de" href="http://www.phpbb.com/community/viewtopic.php?f=69&amp;t=691155">Board3 Portal unterstützt MOD Version Check. Um dieses Feature zu nutzen, muss dieser Mod installiert sein.</link>
			<link type="language" lang="en" href="contrib/de.xml">Manual for German Language-set</link>
			<link type="language" lang="de" href="contrib/de.xml">Anleitung für das deutsche Sprachpaket</link>
			<link type="template" lang="en" href="contrib/subsilver2.xml">Manual for subsilver2</link>
			<link type="template" lang="de" href="contrib/subsilver2.xml">Anleitung für subsilver2</link>
			<link type="contrib" lang="en" href="contrib/update_106_to_200a2/update.xml">Manual for Updating B3P 1.0.6 to 2.0.0b1</link>
			<link type="contrib" lang="de" href="contrib/update_106_to_200a2/update.xml">Anleitung für das Aktualisieren von B3P 1.0.6 zu 2.0.0b1</link>
		</link-group>
		<history>
			<entry>
				<date>2011-05-17</date>
				<rev-version>2.0.0b1</rev-version>
				<changelog lang="en">
					<change>Added missing IF $S_BLOCK_ICON</change>
					<change>Fixed select for displaying events </change>
					<change>Add feature to disable modules without having to remove them</change>
					<change>Fixed typo in title of Latest Bots block</change>
					<change>Applied patch for folders with special characters (upload module)</change>
					<change>Reworked parts of calendar block</change>
					<change>Fixed missing CSS for li-tags of calendar</change>
					<change>Added error handling to installation of modules</change>
					<change>Fixed timezone handling of calendar</change>
					<change>Fixed incorrect handling of links</change>
					<change>Fixed mixup with td and tr in subsilver2 calendar block</change>
					<change>Added missing HTML file for center block of attachments module</change>
					<change>Fixed missing check for correct column when moving a module left or right</change>
					<change>Added possibility to add forumlist to top and bottom column</change>
					<change>Corrected language var for module image as suggested by archivar</change>
					<change>Moved link constants into module files</change>
					<change>Remove php closing tag</change>
					<change>Rewrote basic uploader for module zips</change>
					<change>Modified class files for PHP5 -- PHP5 is now a requirement</change>
					<change>Added check to prevent adding a module more than once</change>
					<change>Added feature to hide portal name on acp configuration page for all modules (was only for latest bots module)</change>
					<change>Added adm folder to allowed upload folders</change>
					<change>Replace chmod with phpbb_chmod in uploader where needed</change>
					<change>Added feature to open external links in a new window</change>
					<change>Merged nickvergessen's phpbb3-tools-trim-message replacing old get_sub_taged_string function</change>
				</changelog>
				<changelog lang="de">
					<change>Fehlendes IF $S_BLOCK_ICON hinzugefügt</change>
					<change>Auswahl für das Anzeigen von Events repariert</change>
					<change>Fähigkeit hinzugefügt um Module zu deaktivieren ohne sie zu entfernen</change>
					<change>Schreibfehler in "Letzte Bots" Block beseitigt</change>
					<change>Patch für Ordner mit Spezialcharaktern hinzugefügt (Upload Modul)</change>
					<change>Teile des Kalender Blocks überarbeitet</change>
					<change>Fehlendes CSS für li-tags des Kalenders hinzugefügt</change>
					<change>Fehlerbehandlung zu Installation von Modulen hinzugefügt</change>
					<change>Zeitzonenbehandlung in Kalender korrigiert</change>
					<change>Falsche Behandlung von Links korrigiert</change>
					<change>Falsche Benutzung von td und tr im subsilver2 Kalender Block beseitigt</change>
					<change>Fehlende HTML Datei des Dateianhänge Moduls für die mittlere Spalte hinzugefügt</change>
					<change>Fehlende Überprüfung auf richtige Spalte beim Verschieben der Module</change>
					<change>Möglichkeit hinzugefügt die Forenliste in die obere und untere Modulezeile hinzuzufügen</change>
					<change>Sprachvariable für Modulbild, wie von archivar vorgeschlagen, abgeändert</change>
					<change>Link Konstanten in Module verschoben</change>
					<change>Schließenden Tag von PHP Dateien entfernt</change>
					<change>Hochlade-Module für Modul Zips komplett neu geschrieben</change>
					<change>Klassen Dateien für PHP5 modifiziert -- PHP5 ist jetzt eine Vorraussetzung</change>
					<change>Überprüfung hinzugefügt, damit ein Modul nicht mehrmals hinzugefügt werden kann</change>
					<change>Möglichkeits hinzugefügt den Modultitel auf der Konfigurationsseite im ACP zu verstecken</change>
					<change>adm Ordner zu erlaubten upload Ordnern hinzugefügt</change>
					<change>chmod mit phpbb_chmod ersetzt in Upload Modul</change>
					<change>Möglichkeit externe Links in einem neuen Fenster zu öffnen hinzugefügt</change>
					<change>nickvergessen's phpbb3-tools-trim-message hinzugefügt - ersetzt die alte Funktion get_sub_taged_string()</change>
				</changelog>
			</entry>
			<entry>
				<date>2011-03-08</date>
				<rev-version>2.0.0a1</rev-version>
				<changelog lang="en">
					<change>First alpha release</change>
				</changelog>
				<changelog lang="de">
					<change>Erste Alpha-Version</change>
				</changelog>
			</entry>
		</history>
	</header>
	<action-group>
		<copy>
			<file from="root/portal.php" to="portal.php" />
			<file from="root/adm/images/*.*" to="adm/images/*.*" />
			<file from="root/adm/mods/board3_portal_check_version.php" to="adm/mods/board3_portal_check_version.php" />
			<file from="root/adm/style/*.*" to="adm/style/*.*" />
			<file from="root/includes/acp/*.*" to="includes/acp/*.*" />
			<file from="root/install/index.php" to="install/index.php" />
			<file from="root/language/en/mods/*.*" to="language/en/mods/*.*" />
			<file from="root/portal/*.*" to="portal/*.*" />
			<file from="root/styles/prosilver/template/portal/*.*" to="styles/prosilver/template/portal/*.*" />
			<file from="root/styles/prosilver/theme/portal.css" to="styles/prosilver/theme/portal.css" />
			<file from="root/styles/prosilver/theme/images/portal/*.*" to="styles/prosilver/theme/images/portal/*.*" />
			<file from="root/umil/*.*" to="umil/*.*" />
		</copy>

		<open src=".htaccess">
			<edit>
				<find><![CDATA[<Files "common.php">
Order Allow,Deny
Deny from All
</Files>]]></find>
				<action type="after-add"><![CDATA[DirectoryIndex portal.php index.php index.html index.htm]]></action>
			</edit>
		</open>
		<open src="viewonline.php">
			<edit>
				<find><![CDATA[		case 'report':
			$location = $user->lang['REPORTING_POST'];
			$location_url = append_sid("{$phpbb_root_path}index.$phpEx");
		break;]]></find>
				<action type="after-add"><![CDATA[		case 'portal':
			$user->add_lang('mods/portal');
			$location = $user->lang['VIEWING_PORTAL'];
			$location_url = append_sid("{$phpbb_root_path}portal.$phpEx");
		break;]]></action>
			</edit>
		</open>
		<open src="includes/functions.php">
			<edit>
				<find><![CDATA[// The following assigns all _common_ variables that may be used at any point in a template.]]></find>
				<action type="before-add"><![CDATA[	$user->add_lang('mods/portal');]]></action>
			</edit>
			<edit>
				<find><![CDATA['U_PRIVATEMSGS'			=> append_sid("{$phpbb_root_path}ucp.$phpEx", 'i=pm&amp;folder=inbox'),]]></find>
				<action type="before-add"><![CDATA[		'U_PORTAL'				=> (isset($config['board3_enable']) && $config['board3_enable'] && $auth->acl_get('u_view_portal')) ? append_sid("{$phpbb_root_path}portal.$phpEx") : '',]]></action>
			</edit>
		</open>
		<open src="includes/session.php">
			<edit>
				<find><![CDATA[		if (!empty($_GET['style']) && $auth->acl_get('a_styles') && !defined('ADMIN_START'))]]></find>
				<action type="replace-with"><![CDATA[		if (!empty($_GET['style']) && !defined('ADMIN_START'))]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/overall_header.html">
			<edit>
				<find><![CDATA[<div class="navbar">]]></find>
				<action type="before-add"><![CDATA[<!-- IF not $S_IN_PORTAL or S_DISPLAY_PHPBB_MENU -->]]></action>
			</edit>
			<edit>
				<find><![CDATA[<li class="icon-home"><a href="{U_INDEX}" accesskey="h">{L_INDEX}</a> <!-- BEGIN navlinks --> <strong>&#8249;</strong>]]></find>
				<inline-edit>
					<inline-find><![CDATA[<li class="icon-home">]]></inline-find>
					<inline-action type="after-add"><![CDATA[<!-- IF U_PORTAL --><a href="{U_PORTAL}">{L_PORTAL}</a> &#187; <!-- ENDIF -->]]></inline-action>
				</inline-edit>
			</edit>
			<edit>
				<find><![CDATA[					<li class="icon-logout"><a href="{U_LOGIN_LOGOUT}" title="{L_LOGIN_LOGOUT}" accesskey="x">{L_LOGIN_LOGOUT}</a></li>
				<!-- ENDIF -->
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>]]></find>
				<action type="after-add"><![CDATA[<!-- ENDIF -->]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/overall_footer.html">
			<edit>
				<find><![CDATA[<li class="icon-home"><a href="{U_INDEX}" accesskey="h">{L_INDEX}</a></li>]]></find>
				<inline-edit>
					<inline-find><![CDATA[<li class="icon-home">]]></inline-find>
					<inline-action type="after-add"><![CDATA[<!-- IF U_PORTAL --><a href="{U_PORTAL}">{L_PORTAL}</a> &#187; <!-- ENDIF -->]]></inline-action>
				</inline-edit>
			</edit>
		</open>
		<open src="styles/prosilver/theme/stylesheet.css">
			<edit>
				<find><![CDATA[@import url("colours.css");]]></find>
				<action type="after-add"><![CDATA[@import url("portal.css");]]></action>
			</edit>
		</open>
		<php-installer>install/index.php</php-installer>
		<diy-instructions lang="de"><![CDATA[Rufe install/index.php auf und führe den Installer aus

Aktualisiere deine Styles:
    "Administrations-Bereich" (ACP) > "Styles" > "Templates" > jedes > "Aktualisieren"
    "Administrations-Bereich" (ACP) > "Styles" > "Themes" > jedes > "Aktualisieren"
    "Administrations-Bereich" (ACP) > "Styles" > "Grafiksammlungen" > jedes > "Aktualisieren"

Leere den Cache im "Administrations-Bereich" (ACP) > "Allgemein" > "Den Cache leeren"
]]></diy-instructions>
		<diy-instructions lang="en"><![CDATA[Browse to install/index.php and run the installer

Refresh your Styles:
    "Administration Control Panel" (ACP) > "Styles" > "Templates" > each > "refresh"
    "Administration Control Panel" (ACP) > "Styles" > "Themes" > each > "refresh"
    "Administration Control Panel" (ACP) > "Styles" > "Imagesets" > each > "refresh"

Clear your cache in the "Administration Control Panel" (ACP) > "General" > "Purge the cache"
]]></diy-instructions>
	</action-group>
</mod>